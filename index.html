<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valentine's Shooting Game</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: #ffb6c1;
      position: relative;
      font-family: 'Arial', sans-serif;
      text-align: center;
    }

    canvas {
      display: block;
      background-color: #ff8fab;
    }

    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      font-size: 24px;
      color: red;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
    }

    .popup button {
      margin-top: 10px;
      padding: 10px;
      border: none;
      background-color: red;
      color: white;
      font-size: 18px;
      cursor: pointer;
      border-radius: 5px;
    }

    .background-message {
      position: absolute;
      top: 20px;
      width: 100%;
      text-align: center;
      font-size: 24px;
      color: white;
      font-weight: bold;
    }

    .start-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: pink;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    .start-screen button {
      padding: 15px;
      font-size: 20px;
      background: red;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }

    #message {
      display: none;
      font-size: 18px;
      color: black;
      margin-top: 20px;
    }
  </style>
</head>

<body>
  <div class="start-screen" id="startScreen">
    <h1>Valentine's Shooting Game</h1>
    <p>Rules: If you let 4 hearts pass the white line, you lose. Shoot 6 hearts to win and unlock your message!</p>
    <button onclick="startGame()">Start Game</button>
  </div>

  <div class="background-message">Hit 6 hearts to unlock your Valentine's message ‚ù§Ô∏è</div>
  <canvas id="gameCanvas"></canvas>

  <div id="popup" class="popup">
    ‚ù§Ô∏è Happy Valentine's Day Britney! ‚ù§Ô∏è<br>
    <button onclick="showMessage()">Click me</button>
    <div id="message">
      <p>Hope you enjoy da gift ya anuh the best because we just start talk and nuh deh yet and me nah work lmao but it better than nth. So Happy Valentine's Day ma! Really wah see how far we ago guh. Hope we talking stage work out and thing, nuh wah seh too much a save some fi when mah ask if you ready fi a relationship lol. Ly punk :) ‚ù§Ô∏è</p>
    </div>
  </div>

  <div id="losePopup" class="popup">
    <p>Yuh nuh wah you Valentine message? üò≠</p>
    <button onclick="location.reload()">Play Again</button>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const popup = document.getElementById('popup');
    const losePopup = document.getElementById('losePopup');
    const startScreen = document.getElementById('startScreen');
    let missedHearts = 0;
    let score = 0;
    let gameActive = false;

    function startGame() {
      startScreen.style.display = 'none';
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      gameActive = true;
      updateGame();
    }

    class Heart {
      constructor(x, y) {
        this.x = x;
        this.y = y;
        this.size = 30;
        // Increased speed range to make hearts fall faster
        this.speed = 4 + Math.random() * 4;
      }
      draw() {
        ctx.fillStyle = '#ff3366';
        ctx.beginPath();
        ctx.arc(this.x - 10, this.y, this.size / 2, 0, Math.PI * 2);
        ctx.arc(this.x + 10, this.y, this.size / 2, 0, Math.PI * 2);
        ctx.fill();
        ctx.beginPath();
        ctx.moveTo(this.x - 20, this.y);
        ctx.lineTo(this.x, this.y + 20);
        ctx.lineTo(this.x + 20, this.y);
        ctx.fill();
      }
      update() {
        this.y += this.speed;
      }
    }

    class Arrow {
      constructor(x, y) {
        this.x = x;
        this.y = y;
        this.speed = 5;
      }
      draw() {
        ctx.fillStyle = 'brown';
        ctx.fillRect(this.x, this.y, 5, 20);
      }
      update() {
        this.y -= this.speed;
      }
    }

    const hearts = [];
    const arrows = [];

    function spawnHeart() {
      if (gameActive) {
        const x = Math.random() * canvas.width;
        hearts.push(new Heart(x, 0));
      }
    }

    function checkCollision() {
      arrows.forEach((arrow, aIndex) => {
        hearts.forEach((heart, hIndex) => {
          const distance = Math.sqrt(Math.pow(arrow.x - heart.x, 2) + Math.pow(arrow.y - heart.y, 2));
          if (distance < heart.size) {
            // Arrow hits the heart
            hearts.splice(hIndex, 1); // Remove the heart
            arrows.splice(aIndex, 1); // Remove the arrow
            score++;
            if (score >= 6) {
              popup.style.display = 'block'; // Show the popup when score is 6
              gameActive = false;
            }
          }
        });
      });
    }

    function updateGame() {
      ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas

      hearts.forEach((heart, hIndex) => {
        heart.update();
        heart.draw();
        if (heart.y > canvas.height) { // If heart passes the bottom, remove it and increase missed count
          hearts.splice(hIndex, 1);
          missedHearts++;
          if (missedHearts >= 4) {
            losePopup.style.display = 'block'; // Show the lose popup when 4 hearts are missed
            gameActive = false;
          }
        }
      });

      arrows.forEach((arrow, aIndex) => {
        arrow.update();
        arrow.draw();
      });

      checkCollision(); // Check for collisions

      if (gameActive) requestAnimationFrame(updateGame); // Continue the game loop
    }

    window.addEventListener('click', (event) => {
      if (gameActive) {
        arrows.push(new Arrow(event.clientX - 2.5, canvas.height - 30)); // Create new arrow at click position
      }
    });

    // Adding touch support for mobile devices
    window.addEventListener('touchstart', (event) => {
      if (gameActive) {
        const touchX = event.touches[0].clientX;
        arrows.push(new Arrow(touchX - 2.5, canvas.height - 30)); // Create new arrow at touch position
      }
    });

    setInterval(spawnHeart, 800); // Spawn hearts every 800ms
  </script>
</body>

</html>
